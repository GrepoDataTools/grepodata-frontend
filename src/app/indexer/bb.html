<div style="font-size: 18px;">
  <a (click)="dialogRef.close()" class="close"></a>
    <h1 class="mat-primary" style="color: #18BC9C; margin-top: 0px;" mat-dialog-title>BB code</h1>

    <div mat-dialog-content>

        <div *ngIf="type!='alliances_indexed' && type!='players_indexed' && type!='island'" class="row">
	        <div *ngIf="hideAvailable && (24 + dataBB.data.length * (type=='player_fire'||type=='player_bir'?8:6)) <= 500" class="col-xs-12 togglecontainer">
		        <label class="switch">
			        <input type="checkbox" [(ngModel)]="showNonPriority">
			        <span class="slider round"></span>
		        </label>
		        <span class="toggle-label">Show duplicate intel</span>
	        </div>
	        <div class="col-xs-12 togglecontainer">
		        <label class="switch">
			        <input type="checkbox" [(ngModel)]="hiddenKey">
			        <span class="slider round"></span>
		        </label>
		        <span class="toggle-label">Hide index key (Remove index links from BB code)</span>
	        </div>
        </div>

        <div class="container-fluid" style="padding: 0px;">
            <button class="btn btn-success" style="margin-bottom: 5px; width: 100%;" (click)="copyBB()">
                <i class="fa fa-clipboard" aria-hidden="true"></i>&nbsp;<span *ngIf="!copied">copy to clipboard</span><span *ngIf="copied">Copied to clipboard!</span>
            </button>
            <!--<button type="button" name="close" class="btn btn-danger col-xs-3" (click)="dialogRef.close()"><i class="fa fa-times"></i> Close</button>-->
        </div>

<!--Player fire-->
<!--num_brackets = 24 + (6*rows || 8*rows) -->
<!--suppress XmlDuplicatedId -->
      <pre *ngIf="type=='player_fire'" id="bb_code">[quote]
[size=12][b]{{dataBB.world.substring(0, 2)=='en'?'Light ship':'Fireship'}} intel for [player]{{dataBB.name}}[/player][/b][/size]
    [ally]{{dataBB.a_name}}[/ally]<span *ngIf="!hiddenKey">, index: [url=https://grepodata.com/indexer/{{dataBB.key}}]{{dataBB.key}}[/url]</span>

[table]
&nbsp;&nbsp;[**]Town[||]{{dataBB.world.substring(0, 2)=='en'?'Light ships':'Fireships'}} (-lost)[||]Date[/**]<span *ngFor="let town of dataBB.data; let i = index;"><span *ngIf="showNonPriority || town?.priority==true&&!showNonPriority"><br/>&nbsp;&nbsp;[*][town]{{town.town_id}}[/town][|]{{town.units | BBLossPipe}}[|]{{town.date | IndexDate}}[/*]</span></span>
[/table][i]This table was generated on [b]{{generated_at}}[/b].[/i]
<span *ngIf="!hiddenKey">An up-to-date version can be found [url=https://grepodata.com/indexer/player/{{dataBB.key}}/{{dataBB.world}}/{{dataBB.id}}]here[/url]</span>
[/quote]</pre>

<!--Player myth-->
<!--num_brackets = 24 + 6*rows -->
<!--suppress XmlDuplicatedId -->
      <pre *ngIf="type=='player_myth'" id="bb_code">[quote]
[size=12][b]Mythical unit intel for [player]{{dataBB.name}}[/player][/b][/size]
    [ally]{{dataBB.a_name}}[/ally]<span *ngIf="!hiddenKey">, index: [url=https://grepodata.com/indexer/{{dataBB.key}}]{{dataBB.key}}[/url]</span>

[table]
&nbsp;&nbsp;[**]Town[||]Mythical units (-lost)[||]Date[/**]<span *ngFor="let town of dataBB.data; let i = index;"><span *ngIf="showNonPriority || town?.priority==true&&!showNonPriority"><br/>&nbsp;&nbsp;[*][town]{{town.town_id}}[/town][|]{{town.units | UnitIconPipe}}[|]{{town.date | IndexDate}}[/*]</span></span>
[/table]

[i]This table was generated on [b]{{generated_at}}[/b].[/i]
<span *ngIf="!hiddenKey">An up-to-date version can be found [url=https://grepodata.com/indexer/player/{{dataBB.key}}/{{dataBB.world}}/{{dataBB.id}}]here[/url]
</span>
[/quote]</pre>

<!--Player bir-->
<!--num_brackets = 24 + (6*rows || 8*rows) -->
<!--suppress XmlDuplicatedId -->
      <pre *ngIf="type=='player_bir'" id="bb_code">[quote]
[size=12][b]Bireme intel for [player]{{dataBB.name}}[/player][/b][/size]
    [ally]{{dataBB.a_name}}[/ally]<span *ngIf="!hiddenKey">, index: [url=https://grepodata.com/indexer/{{dataBB.key}}]{{dataBB.key}}[/url]</span>

[table]
&nbsp;&nbsp;[**]Town[||]Biremes (-lost)[||]Date[/**]<span *ngFor="let town of dataBB.data; let i = index;"><span *ngIf="showNonPriority || town?.priority==true&&!showNonPriority"><br/>&nbsp;&nbsp;[*][town]{{town.town_id}}[/town][|]{{town.units | BBLossPipe}}[|]{{town.date | IndexDate}}[/*]</span></span>
[/table]

[i]This table was generated on [b]{{generated_at}}[/b].[/i]
<span *ngIf="!hiddenKey">An up-to-date version can be found [url=https://grepodata.com/indexer/player/{{dataBB.key}}/{{dataBB.world}}/{{dataBB.id}}]here[/url]
</span>
[/quote]</pre>

<!--Player trir-->
<!--num_brackets = 24 + (6*rows || 8*rows) -->
<!--suppress XmlDuplicatedId -->
<pre *ngIf="type=='player_trir'" id="bb_code">[quote]
  [size=12][b]Trireme intel for [player]{{dataBB.name}}[/player][/b][/size]
      [ally]{{dataBB.a_name}}[/ally]<span *ngIf="!hiddenKey">, index: [url=https://grepodata.com/indexer/{{dataBB.key}}]{{dataBB.key}}[/url]</span>
  
  [table]
  &nbsp;&nbsp;[**]Town[||]Triremes (-lost)[||]Date[/**]<span *ngFor="let town of dataBB.data; let i = index;"><span *ngIf="showNonPriority || town?.priority==true&&!showNonPriority"><br/>&nbsp;&nbsp;[*][town]{{town.town_id}}[/town][|]{{town.units | BBLossPipe}}[|]{{town.date | IndexDate}}[/*]</span></span>
  [/table][i]This table was generated on [b]{{generated_at}}[/b].[/i]
  <span *ngIf="!hiddenKey">An up-to-date version can be found [url=https://grepodata.com/indexer/player/{{dataBB.key}}/{{dataBB.world}}/{{dataBB.id}}]here[/url]</span>
  [/quote]</pre>

<!--Player off-->
<!--num_brackets = 24 + 6*rows -->
<!--suppress XmlDuplicatedId -->
      <pre *ngIf="type=='player_off'" id="bb_code">[quote]
[size=12][b]Offensive land unit intel for [player]{{dataBB.name}}[/player][/b][/size]
    [ally]{{dataBB.a_name}}[/ally]<span *ngIf="!hiddenKey">, index: [url=https://grepodata.com/indexer/{{dataBB.key}}]{{dataBB.key}}[/url]</span>

[table]
&nbsp;&nbsp;[**]Town[||]OFF units (-lost)[||]Date[/**]<span *ngFor="let town of dataBB.data; let i = index;"><span *ngIf="showNonPriority || town?.priority==true&&!showNonPriority"><br/>&nbsp;&nbsp;[*][town]{{town.town_id}}[/town][|]{{town.units | UnitIconPipe}}[|]{{town.date | IndexDate}}[/*]</span></span>
[/table]

[i]This table was generated on [b]{{generated_at}}[/b].[/i]
<span *ngIf="!hiddenKey">An up-to-date version can be found [url=https://grepodata.com/indexer/player/{{dataBB.key}}/{{dataBB.world}}/{{dataBB.id}}]here[/url]
</span>
[/quote]</pre>

<!--Player def-->
<!--num_brackets = 24 + 6*rows -->
<!--suppress XmlDuplicatedId -->
      <pre *ngIf="type=='player_def'" id="bb_code">[quote]
[size=12][b]Defensive land unit intel for [player]{{dataBB.name}}[/player][/b][/size]
    [ally]{{dataBB.a_name}}[/ally]<span *ngIf="!hiddenKey">, index: [url=https://grepodata.com/indexer/{{dataBB.key}}]{{dataBB.key}}[/url]</span>

[table]
&nbsp;&nbsp;[**]Town[||]DEF units (-lost)[||]Date[/**]<span *ngFor="let town of dataBB.data; let i = index;"><span *ngIf="showNonPriority || town?.priority==true&&!showNonPriority"><br/>&nbsp;&nbsp;[*][town]{{town.town_id}}[/town][|]{{town.units | UnitIconPipe}}[|]{{town.date | IndexDate}}[/*]</span></span>
[/table]

[i]This table was generated on [b]{{generated_at}}[/b].[/i]
<span *ngIf="!hiddenKey">An up-to-date version can be found [url=https://grepodata.com/indexer/player/{{dataBB.key}}/{{dataBB.world}}/{{dataBB.id}}]here[/url]
</span>
[/quote]</pre>

<!--Players indexed-->
<!--suppress XmlDuplicatedId -->
      <pre *ngIf="type=='players_indexed'" id="bb_code">[quote]
    [size=12][b]Most indexed players (index: [url=https://grepodata.com/indexer/{{dataBB.key}}]{{dataBB.key}}[/url])[/b][/size]

[table]
  [**]#[||]Player[||]Intel[||]Link[/**]<span *ngFor="let player of dataBB.data; let i = index;">
  [*]{{i+1}}.[|][player]{{player?.player_name}}[/player][|]{{player.count}}[|][url=https://grepodata.com/indexer/player/{{dataBB.key}}/{{dataBB.world}}/{{player?.player_id}}]View collected intel[/url][/*]</span>
[/table]
[i]This table was generated on [b]{{generated_at}}[/b].[/i]
An up-to-date version can be found [url=https://grepodata.com/indexer/{{dataBB.key}}]here[/url]

[/quote]</pre>

<!--Alliances indexed-->
<!--suppress XmlDuplicatedId -->
      <pre *ngIf="type=='alliances_indexed'" id="bb_code">[quote]
[size=12][b]Most indexed alliances (index: [url=https://grepodata.com/indexer/{{dataBB.key}}]{{dataBB.key}}[/url])[/b][/size]

[table]
  [**]#[||]Alliance[||]Intel[||]Link[/**]<span *ngFor="let alliance of dataBB.data; let i = index;">
  [*]{{i+1}}.[|][ally]{{alliance?.alliance_name}}[/ally][|]{{alliance.count}}[|][url=https://grepodata.com/indexer/alliance/{{dataBB.key}}/{{dataBB.world}}/{{alliance?.alliance_id}}]View collected intel[/url][/*]</span>
[/table]
[i]This table was generated on [b]{{generated_at}}[/b].[/i]
An up-to-date version can be found [url=https://grepodata.com/indexer/{{dataBB.key}}]here[/url]

[/quote]</pre>

<!--Islands-->
<!--suppress XmlDuplicatedId -->
        <!--173399-->
      <pre *ngIf="type=='island'" id="bb_code">[quote]
[size=12][b]Intel for [island]{{dataBB.data.island}}[/island] (index: [url=https://grepodata.com/indexer/{{dataBB.key}}]{{dataBB.key}}[/url])[/b][/size]

[table]
  [**]Town[||]Player[||]Intel[||]Link[/**]<span *ngFor="let town of dataBB.data.towns; let i = index;">
  [*][town]{{town?.id}}[/town][|][player]{{town.player_name}}[/player][|]{{town.count}}[|][url=https://grepodata.com/indexer/town/{{dataBB.key}}/{{dataBB.world}}/{{town?.id}}]View intel[/url][/*]</span>
[/table]
[i]This table was generated on [b]{{generated_at}}[/b].[/i]

[/quote]</pre>

	    <div *ngIf="(type=='alliances_indexed' || type=='players_indexed') && !copied">
		    <div class="alert alert-warning"style="    padding: 7px;">Warning! This BB code contains your index key; share it wisely!</div>
	    </div>
    </div>
</div>
